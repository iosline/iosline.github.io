<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Hexo">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/page/2/"/>

  <title> Hexo </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Hexo</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/27/Android-RecyclerView使用全解析（二）/" itemprop="url">
                  Android-RecyclerView使用全解析(二)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-10-27T10:38:27+08:00" content="2015-10-27">
              2015-10-27
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>###一、多Item布局实现(MultipleItem)<br>如果之前你用过ListView实现过此功能，那么你一定对下面这两个方法并不陌生</p>
<pre><code>@Override
    public int getItemViewType(int position) {
        return super.getItemViewType(position);
    }

    @Override
    public int getViewTypeCount() {
        return super.getViewTypeCount();
    }
</code></pre><p>其中<b>getItemViewType</b>方法是用来获取当前项Item(position参数)是哪种类型的布局</p>
<p><b>getViewTypeCount</b>方法是用来获取当前listview总共有多少种类型的布局。</p>
<p>如果你用RecyclerView，你会发现getViewTypeCount这个方法没有了，只有一个<b>getItemViewType</b>方法，用法和listview没有任何区别，这里要注意的就是这个函数<b>onCreateViewHolder(ViewGroup parent, int viewType)</b>这里的第二个参数就是View的类型，可以根据这个类型判断去创建不同item的ViewHolder。</p>
<pre><code>public class MultipleItemAdapter extends RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt; {
    public static enum ITEM_TYPE {
        ITEM_TYPE_IMAGE,
        ITEM_TYPE_TEXT
    }

    private final LayoutInflater mLayoutInflater;
    private final Context mContext;
    private String[] mTitles;

    public MultipleItemAdapter(Context context) {
        mTitles = context.getResources().getStringArray(R.array.titles);
        mContext = context;
        mLayoutInflater = LayoutInflater.from(context);
    }

    @Override
    public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {
        if (viewType == ITEM_TYPE.ITEM_TYPE_IMAGE.ordinal()) {
            return new ImageViewHolder(mLayoutInflater.inflate(R.layout.item_image, parent, false));
        } else {
            return new TextViewHolder(mLayoutInflater.inflate(R.layout.item_text, parent, false));
        }
    }

    @Override
    public void onBindViewHolder(RecyclerView.ViewHolder holder, int position) {
        if (holder instanceof TextViewHolder) {
            ((TextViewHolder) holder).mTextView.setText(mTitles[position]);
        } else if (holder instanceof ImageViewHolder) {
            ((ImageViewHolder) holder).mTextView.setText(mTitles[position]);
        }
    }

    @Override
    public int getItemViewType(int position) {
        return position % 2 == 0 ? ITEM_TYPE.ITEM_TYPE_IMAGE.ordinal() : ITEM_TYPE.ITEM_TYPE_TEXT.ordinal();
    }

    @Override
    public int getItemCount() {
        return mTitles == null ? 0 : mTitles.length;
    }

    public static class TextViewHolder extends RecyclerView.ViewHolder {
        @InjectView(R.id.text_view)
        TextView mTextView;

        TextViewHolder(View view) {
            super(view);
            ButterKnife.inject(this, view);
            view.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    Log.d(&quot;TextViewHolder&quot;, &quot;onClick--&gt; position = &quot; + getPosition());
                }
            });
        }
    }

    public static class ImageViewHolder extends RecyclerView.ViewHolder {
        @InjectView(R.id.text_view)
        TextView mTextView;
        @InjectView(R.id.image_view)
        ImageView mImageView;

        ImageViewHolder(View view) {
            super(view);
            ButterKnife.inject(this, view);
            view.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    Log.d(&quot;ImageViewHolder&quot;, &quot;onClick--&gt; position = &quot; + getPosition());
                }
            });
        }
    }
    }
</code></pre><p>怎么样，是不是很简单，没错，就是这么简单，但是只要会了这个多Item，那么你就可以做出很多效果了，比如HeaderView和BottomView也是可以通过这种方式来实现的。(<a href="https://github.com/Frank-Zhu/AndroidRecyclerViewDemo/blob/master/app/src/main/java/com/frankzhu/recyclerviewdemo/adapter/HeaderBottomItemAdapter.java" target="_blank" rel="external">HeaderView Adapter</a>)</p>
<p>###二、嵌套RecyclerView(不好，会出各种问题：例，底部下方会有大量空白空间等)<br>一般是不推荐使用嵌套RecycleView的，和ListView是类似的，遇到这种需要嵌套的View一般都是想别的办法来规避，比如<b>动态AddView</b>，或者通过<b>RecycleView的MultipleItemAdapter</b>来实现，通过设置不同的ItemType布局不同的View，但是有时候会闲麻烦，想直接就用嵌套的方式来做，那么和ListView实现方式不同的是，ListView的实现一般都是继承ListView然后复写onMeasure方法，如下所示：</p>
<pre><code>@Override
   protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
       int expandSpec = MeasureSpec.makeMeasureSpec(Integer.MAX_VALUE &gt;&gt; 2, MeasureSpec.AT_MOST);
       super.onMeasure(widthMeasureSpec, expandSpec);
   }
</code></pre><p>但是RecycleView的实现方式不再是继承RecycleView来做，而是通过<b>修改LayoutManager</b>的方式，即通过继承LinearLayoutManager GridLayoutManager StaggeredGridLayoutManager来修改子控件的测量，下面给出主要代码：</p>
<p>####FullyLinearLayoutManager</p>
<pre><code>private int[] mMeasuredDimension = new int[2];

    @Override
    public void onMeasure(RecyclerView.Recycler recycler, RecyclerView.State state,
                          int widthSpec, int heightSpec) {

        final int widthMode = View.MeasureSpec.getMode(widthSpec);
        final int heightMode = View.MeasureSpec.getMode(heightSpec);
        final int widthSize = View.MeasureSpec.getSize(widthSpec);
        final int heightSize = View.MeasureSpec.getSize(heightSpec);

        Log.i(TAG, &quot;onMeasure called. \nwidthMode &quot; + widthMode
                + &quot; \nheightMode &quot; + heightSpec
                + &quot; \nwidthSize &quot; + widthSize
                + &quot; \nheightSize &quot; + heightSize
                + &quot; \ngetItemCount() &quot; + getItemCount());

        int width = 0;
        int height = 0;
        for (int i = 0; i &lt; getItemCount(); i++) {
            measureScrapChild(recycler, i,
                    View.MeasureSpec.makeMeasureSpec(i, View.MeasureSpec.UNSPECIFIED),
                    View.MeasureSpec.makeMeasureSpec(i, View.MeasureSpec.UNSPECIFIED),
                    mMeasuredDimension);

            if (getOrientation() == HORIZONTAL) {
                width = width + mMeasuredDimension[0];
                if (i == 0) {
                    height = mMeasuredDimension[1];
                }
            } else {
                height = height + mMeasuredDimension[1];
                if (i == 0) {
                    width = mMeasuredDimension[0];
                }
            }
        }
        switch (widthMode) {
            case View.MeasureSpec.EXACTLY:
                width = widthSize;
            case View.MeasureSpec.AT_MOST:
            case View.MeasureSpec.UNSPECIFIED:
        }

        switch (heightMode) {
            case View.MeasureSpec.EXACTLY:
                height = heightSize;
            case View.MeasureSpec.AT_MOST:
            case View.MeasureSpec.UNSPECIFIED:
        }

        setMeasuredDimension(width, height);
    }

    private void measureScrapChild(RecyclerView.Recycler recycler, int position, int widthSpec,
                                   int heightSpec, int[] measuredDimension) {
        try {
            View view = recycler.getViewForPosition(0);//fix 动态添加时报IndexOutOfBoundsException

            if (view != null) {
                RecyclerView.LayoutParams p = (RecyclerView.LayoutParams) view.getLayoutParams();

                int childWidthSpec = ViewGroup.getChildMeasureSpec(widthSpec,
                        getPaddingLeft() + getPaddingRight(), p.width);

                int childHeightSpec = ViewGroup.getChildMeasureSpec(heightSpec,
                        getPaddingTop() + getPaddingBottom(), p.height);

                view.measure(childWidthSpec, childHeightSpec);
                measuredDimension[0] = view.getMeasuredWidth() + p.leftMargin + p.rightMargin;
                measuredDimension[1] = view.getMeasuredHeight() + p.bottomMargin + p.topMargin;
                recycler.recycleView(view);
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
        }
    }
</code></pre><p>####FullyGridLayoutManager</p>
<pre><code>private int[] mMeasuredDimension = new int[2];

    @Override
    public void onMeasure(RecyclerView.Recycler recycler, RecyclerView.State state, int widthSpec, int heightSpec) {
        final int widthMode = View.MeasureSpec.getMode(widthSpec);
        final int heightMode = View.MeasureSpec.getMode(heightSpec);
        final int widthSize = View.MeasureSpec.getSize(widthSpec);
        final int heightSize = View.MeasureSpec.getSize(heightSpec);

        int width = 0;
        int height = 0;
        int count = getItemCount();
        int span = getSpanCount();
        for (int i = 0; i &lt; count; i++) {
            measureScrapChild(recycler, i,
                    View.MeasureSpec.makeMeasureSpec(i, View.MeasureSpec.UNSPECIFIED),
                    View.MeasureSpec.makeMeasureSpec(i, View.MeasureSpec.UNSPECIFIED),
                    mMeasuredDimension);

            if (getOrientation() == HORIZONTAL) {
                if (i % span == 0) {
                    width = width + mMeasuredDimension[0];
                }
                if (i == 0) {
                    height = mMeasuredDimension[1];
                }
            } else {
                if (i % span == 0) {
                    height = height + mMeasuredDimension[1];
                }
                if (i == 0) {
                    width = mMeasuredDimension[0];
                }
            }
        }

        switch (widthMode) {
            case View.MeasureSpec.EXACTLY:
                width = widthSize;
            case View.MeasureSpec.AT_MOST:
            case View.MeasureSpec.UNSPECIFIED:
        }

        switch (heightMode) {
            case View.MeasureSpec.EXACTLY:
                height = heightSize;
            case View.MeasureSpec.AT_MOST:
            case View.MeasureSpec.UNSPECIFIED:
        }

        setMeasuredDimension(width, height);
    }

    private void measureScrapChild(RecyclerView.Recycler recycler, int position, int widthSpec,
                                   int heightSpec, int[] measuredDimension) {
        if (position &lt; getItemCount()) {
            try {
                View view = recycler.getViewForPosition(0);//fix 动态添加时报IndexOutOfBoundsException
                if (view != null) {
                    RecyclerView.LayoutParams p = (RecyclerView.LayoutParams) view.getLayoutParams();
                    int childWidthSpec = ViewGroup.getChildMeasureSpec(widthSpec,
                            getPaddingLeft() + getPaddingRight(), p.width);
                    int childHeightSpec = ViewGroup.getChildMeasureSpec(heightSpec,
                            getPaddingTop() + getPaddingBottom(), p.height);
                    view.measure(childWidthSpec, childHeightSpec);
                    measuredDimension[0] = view.getMeasuredWidth() + p.leftMargin + p.rightMargin;
                    measuredDimension[1] = view.getMeasuredHeight() + p.bottomMargin + p.topMargin;
                    recycler.recycleView(view);
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/17/Android-Studio如何导入第三方类库/" itemprop="url">
                  Android Studio如何导入第三方类库
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-10-17T12:03:52+08:00" content="2015-10-17">
              2015-10-17
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#Android Studio导入第三方类库</p>
<p>###一、第一种情况是：*.jar的第三方包<br>这一种情况比较简单：有两步</p>
<p><li>在项目中新建一个名字叫<b>libs</b>的文件夹</li></p>
<p><li>将jar包复制到这个文件夹下，然后在这个jar包上右键————&gt;Add as Library  搞定</li></p>
<p>最后可以点住项目 按<b> F12 ——&gt;dependedices</b> 查看 包是否导入</p>
<p>###二、导入第三方java类库含源代码包（重点）<br><a href="http://pan.baidu.com/s/1bndTFRL" target="_blank" rel="external">slidingmenu第三方类库</a></p>
<p>####1.像导入一个项目那样导入类库<br>File——&gt;New——&gt;import Module  选中要导入的类库<br><img src="http://7xl32g.com1.z0.glb.clouddn.com/import_library_1.png"></p>
<p>这个时候工程中setting.gradle中就会多一个类库</p>
<pre><code>include &apos;:app&apos;, &apos;:slidingmenu_library&apos;
</code></pre><p>####2.这时就会在library项目中自动生成build.gradle这个文件，就对它就行各种编译版本等的修改<br><img src="http://7xl32g.com1.z0.glb.clouddn.com/import_library_3.png" width="600"></p>
<p>####3.对app项目添加对库的依赖<br>点住app——&gt;F12——&gt;dependenices——&gt;+Module Library  即可<br><img src="http://7xl32g.com1.z0.glb.clouddn.com/import_library_2.png"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/14/Android-最火的快速开发框架AndroidAnnotations使用详解/" itemprop="url">
                  Android 最火的快速开发框架AndroidAnnotations使用详解
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-10-14T16:47:48+08:00" content="2015-10-14">
              2015-10-14
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#Android 最火的快速开发框架AndroidAnnotations使用详解</p>
<p>###一、配置（Android Studio）</p>
<p><li>1.在Model的build.gradle中添加</li></p>
<pre><code>apply plugin: &apos;com.android.application&apos;
apply plugin: &apos;android-apt&apos;
def AAVersion = &apos;XXX&apos;

dependencies {
    apt &quot;org.androidannotations:androidannotations:$AAVersion&quot;
    compile &quot;org.androidannotations:androidannotations-api:$AAVersion&quot;
}

apt {
    arguments {
        androidManifestFile variant.outputs[0].processResources.manifestFile
    }
} 
</code></pre><p><li>2.在Project的build.gradle中添加 （就一行）</li></p>
<pre><code>buildscript {
    repositories {
      mavenCentral()
    }
    dependencies {
        // replace with the current version of the Android plugin
        classpath &apos;com.android.tools.build:gradle:1.2.2&apos;
        // replace with the current version of the android-apt plugin
        classpath &apos;com.neenbedankt.gradle.plugins:android-apt:1.4&apos;    //就这一行
    }
}

repositories {
    mavenCentral()
    mavenLocal()
}
</code></pre><p>###二、使用<br>详细使用看github上的中文介绍：<a href="https://github.com/mrljdx/AndroidAnnotaions/blob/master/androidannotation_zh_CN/1.0.1_%E5%B8%B8%E7%94%A8%E6%B3%A8%E9%87%8A.markdown" target="_blank" rel="external">简单使用</a></p>
<p>最最最要注意的一点就是：</p>
<p>使用AndroidAnnotations千万要记得，编译的时候会生成一个子类，这个子类的名称就是在<br>原来的类之后加了一个下划线“<em>”，比如这个例子产生的子类名称为“MyActivity</em>”，这就需要你在注册这个Activity的时候，在<br>AndroidManifest.xml中将 MyActivity 改为 MyActivity<em> ，使用的时候也是使用MyActivity</em>来表示此类，如从另一个Activity跳转<br>到此节目就要这样用：</p>
<pre><code>startActivity(new Intent(this,MyActivity_.class));  
</code></pre><p>注意，是MyActivity_.class 不是 MyActivity.class;</p>
<p>####@EActivity<br>示例：</p>
<pre><code>@EActivity(R.layout.main)
public class MyActivity extends Activity {

}
</code></pre><p>注意：清单文件中Activity的注册(Service、Receiver、Provider的注册一样)</p>
<pre><code>&lt;Activity name=&quot;com.quwenleiqi.ui.MyActivity_.class&quot;/&gt;
</code></pre><p>####@EFragment<br>示例：</p>
<pre><code>@EFragment(R.layout.my_fragment_layout)
public class MyFragment extends Fragment {
}
</code></pre><p>注册：</p>
<pre><code>&lt;fragment
        android:id=&quot;@+id/myFragment&quot;
        android:name=&quot;com.company.MyFragment_&quot;
        android:layout_width=&quot;fill_parent&quot;
        android:layout_height=&quot;fill_parent&quot; /&gt;
</code></pre><p>创建：</p>
<pre><code>MyFragment fragment = new MyFragment_();
</code></pre><p>####@FragmentArg<br>     @EFragment<br>    public class MyFragment extends Fragment {//等同于 Fragment Argument</p>
<pre><code>  @FragmentArg(&quot;myStringArgument&quot;)
  String myMessage;

  @FragmentArg
  String anotherStringArgument;

  @FragmentArg(&quot;myDateExtra&quot;)
  Date myDateArgumentWithDefaultValue = new Date();

}
MyFragment myFragment = MyFragment_.builder()
  .myMessage(&quot;Hello&quot;)
  .anotherStringArgument(&quot;World&quot;)
  .build();
</code></pre><p>####@OptionsMenu和OptionsItem<br>     @EActivity<br>    @OptionsMenu(R.menu.my_menu)<br>    public class MyActivity extends Activity {</p>
<pre><code>    @OptionMenuItem
    MenuItem menuSearch;

    @OptionsItem(R.id.menuShare)
        void myMethod() {
          // You can specify the ID in the annotation, or use the naming convention
        }

    @OptionsItem
    void homeSelected() {
      // home was selected in the action bar
          // The &quot;Selected&quot; keyword is optional
    }

    @OptionsItem
    boolean menuSearch() {
          menuSearch.setVisible(false);
          // menuSearch was selected
          // the return type may be void or boolean (false to allow normal menu processing to proceed, true to consume it here)
          return true;
    }

    @OptionsItem({ R.id.menu_search, R.id.menu_delete })
    void multipleMenuItems() {
      // You can specify multiple menu item IDs in @OptionsItem
    }

    @OptionsItem
    void menu_add(MenuItem item) {
      // You can add a MenuItem parameter to access it
    }
}
</code></pre><p>或者：</p>
<pre><code> @EActivity
@OptionsMenu({R.menu.my_menu1, R.menu.my_menu2})
public class MyActivity extends Activity {

}
</code></pre><p>####@RestService</p>
<p>声明：</p>
<pre><code>@RestService
BookmarkClient restClient;
</code></pre><p>请求数据的url获取数据的服务</p>
<pre><code>@Rest(&quot;http://www.bookmarks.com&quot;)
public interface BookmarkClient {

  @Get(&quot;/bookmarks/{userId}?search={search}&quot;)
  Bookmarks getBookmarks(String search, String userId);

}
</code></pre><p>在background中执行 restClient.getBookmarks();</p>
<p>####@Background<br>执行：</p>
<pre><code> void myMethod() {
    someBackgroundWork(&quot;hello&quot;, 42);
}

@Background
void someBackgroundWork(String aParam, long anotherParam) {
    [...]
}
</code></pre><p>取消：</p>
<pre><code> void myMethod() {
    someCancellableBackground(&quot;hello&quot;, 42);
    [...]
    boolean mayInterruptIfRunning = true;
    BackgroundExecutor.cancelAll(&quot;cancellable_task&quot;, mayInterruptIfRunning);
}

@Background(id=&quot;cancellable_task&quot;)
void someCancellableBackground(String aParam, long anotherParam) {
    [...]
}
</code></pre><p>非并发执行：</p>
<pre><code> void myMethod() {
    for (int i = 0; i &lt; 10; i++)
        someSequentialBackgroundMethod(i);
}

@Background(serial = &quot;test&quot;)
void someSequentialBackgroundMethod(int i) {
    SystemClock.sleep(new Random().nextInt(2000)+1000);
    Log.d(&quot;AA&quot;, &quot;value : &quot; + i);
}
</code></pre><p>延迟：</p>
<pre><code> @Background(delay=2000)
void doInBackgroundAfterTwoSeconds() {
}
</code></pre><p>####@UiThread<br>UI线程：</p>
<pre><code> void myMethod() {
    doInUiThread(&quot;hello&quot;, 42);
}

@UiThread
void doInUiThread(String aParam, long anotherParam) {
    [...]
}
</code></pre><p>延迟：</p>
<pre><code> @UiThread(delay=2000)
void doInUiThreadAfterTwoSeconds() {
}
</code></pre><p>优化UI线程：</p>
<pre><code> @UiThread(propagation = Propagation.REUSE)
void runInSameThreadIfOnUiThread() {
}
</code></pre><p>进度值改变：</p>
<pre><code> @EActivity
public class MyActivity extends Activity {

  @Background
  void doSomeStuffInBackground() {
    publishProgress(0);
    // Do some stuff
    publishProgress(10);
    // Do some stuff
    publishProgress(100);
  }

  @UiThread
  void publishProgress(int progress) {
    // Update progress views
  }

}
</code></pre><p>####@OnActivityResult<br>     @OnActivityResult(REQUEST_CODE)<br>     void onResult(int resultCode, Intent data) {<br>     }</p>
<pre><code>@OnActivityResult(REQUEST_CODE)
void onResult(int resultCode) {
}

@OnActivityResult(ANOTHER_REQUEST_CODE)
void onResult(Intent data) {
}

@OnActivityResult(ANOTHER_REQUEST_CODE)
void onResult() {
}
</code></pre><p>####@EBean</p>
<p>普通类：</p>
<pre><code>@EBean
public class MyClass {

}
</code></pre><p>注意：这个类必须仅仅只能有一个构造函数，参数最多有一个context。</p>
<p>Activity中使用：</p>
<pre><code>@EActivity
public class MyActivity extends Activity {

  @Bean
  MyOtherClass myOtherClass;

}
</code></pre><p>也可以用来声明接口：</p>
<pre><code>@Bean(MyImplementation.class)   //接口的实现类
MyInterface myInterface;        //接口
</code></pre><p>在普通类中还可以注入根环境:</p>
<pre><code>@EBean
public class MyClass {

  @RootContext
  Context context;

  // Only injected if the root context is an activity
  @RootContext
  Activity activity;

  // Only injected if the root context is a service
  @RootContext
  Service service;

  // Only injected if the root context is an instance of MyActivity
  @RootContext
  MyActivity myActivity;

}
</code></pre><p>如果想在类创建时期做一些操作可以：</p>
<pre><code>@AfterInject
  public void doSomethingAfterInjection() {
    // notificationManager and dependency are set
  }
</code></pre><p>单例类需要如下声明：</p>
<pre><code>@EBean(scope = Scope.Singleton)
public class MySingleton {

}
</code></pre><p>注意：在单例类里面不可以注入view和事件绑定，因为单例的生命周期比Activity和Service的要长，以免发生内存溢出。</p>
<p>####@EView</p>
<pre><code>@EView
public class CustomButton extends Button {

        @App
        MyApplication application;

        @StringRes
        String someStringResource;

    public CustomButton(Context context, AttributeSet attrs) {
        super(context, attrs);
    }
}
</code></pre><p>注册：</p>
<pre><code>&lt;com.androidannotations.view.CustomButton_
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot; /&gt;
</code></pre><p>创建：</p>
<pre><code>CustomButton button = CustomButton_.build(context);
</code></pre><p>####@EViewGroup</p>
<pre><code>@EViewGroup(R.layout.title_with_subtitle)
public class TitleWithSubtitle extends RelativeLayout {

    @ViewById
    protected TextView title, subtitle;

    public TitleWithSubtitle(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public void setTexts(String titleText, String subTitleText) {
        title.setText(titleText);
        subtitle.setText(subTitleText);
    }

}
</code></pre><p>注册：</p>
<pre><code>&lt;com.androidannotations.viewgroup.TitleWithSubtitle_
        android:id=&quot;@+id/firstTitle&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot; /&gt;
</code></pre><p>####@EApplication</p>
<pre><code>@EApplication
public class MyApplication extends Application {

}
</code></pre><p>Activity中使用：</p>
<pre><code> @EActivity
public class MyActivity extends Activity {

  @App
  MyApplication application;

}
</code></pre><p>####@EService<br>     @EService<br>    public class MyService extends Service {</p>
<pre><code>}
</code></pre><p>跳转service：</p>
<pre><code>MyService_.intent(getApplication()).start();
</code></pre><p>停止service：</p>
<pre><code>MyService_.intent(getApplication()).stop();
</code></pre><p>####@EReceiver<br>     @EReceiver<br>    public class MyReceiver extends BroadcastReceiver {</p>
<pre><code>}
</code></pre><p>####@Receiver<br>可以替代声明BroadcastReceiver</p>
<pre><code> @EActivity
public class MyActivity extends Activity {

  @Receiver(actions = &quot;org.androidannotations.ACTION_1&quot;)
  protected void onAction1() {

  }

}
</code></pre><p>####@EProvider<br>     @EProvider<br>    public class MyContentProvider extends ContentProvider {</p>
<pre><code>}
</code></pre><p>####@ViewById<br>     @EActivity<br>    public class MyActivity extends Activity {</p>
<pre><code>  // Injects R.id.myEditText，变量名称必须和布局的id名称一致
  @ViewById
  EditText myEditText;

  @ViewById(R.id.myTextView)
  TextView textView;
}
</code></pre><p>####@AfterViews<br>     @EActivity(R.layout.main)<br>    public class MyActivity extends Activity {</p>
<pre><code>    @ViewById
    TextView myTextView;

    @AfterViews
    void updateTextWithDate() {
//一定要在这里进行view的一些设置，不要在oncreate()中设置，因为oncreate()在执行时 view还没有注入
        myTextView.setText(&quot;Date: &quot; + new Date());    }[...]
</code></pre><p>####@StringRes<br>     @EActivity<br>    public class MyActivity extends Activity {</p>
<pre><code>  @StringRes(R.string.hello)
  String myHelloString;//不能设置成私有变量

  @StringRes
  String hello;

}
</code></pre><p>####@ColorRes<br>     @EActivity<br>    public class MyActivity extends Activity {</p>
<pre><code>  @ColorRes(R.color.backgroundColor)
  int someColor;

  @ColorRes
  int backgroundColor;

}
</code></pre><p>####@AnimationRes<br>     @EActivity<br>    public class MyActivity extends Activity {</p>
<pre><code>  @AnimationRes(R.anim.fadein)
  XmlResourceParser xmlResAnim;

  @AnimationRes
  Animation fadein;

}
</code></pre><p>####@DimensionRes<br>     @EActivity<br>    public class MyActivity extends Activity {</p>
<pre><code>  @DimensionRes(R.dimen.fontsize)
  float fontSizeDimension;

  @DimensionRes
  float fontsize;

}
</code></pre><p>####@DImensionPixelOffsetRes<br>     @EActivity<br>    public class MyActivity extends Activity {</p>
<pre><code>  @DimensionPixelOffsetRes(R.string.fontsize)
  int fontSizeDimension;

  @DimensionPixelOffsetRes
  int fontsize;

}
</code></pre><p>####@DimensionPixelSizeRes<br>     @EActivity<br>    public class MyActivity extends Activity {</p>
<pre><code>  @DimensionPixelSizeRes(R.string.fontsize)
  int fontSizeDimension;

  @DimensionPixelSizeRes
  int fontsize;

}
</code></pre><p>####其他的Res：<br><li>@BooleanRes<br></li><li>@ColorStateListRes<br></li><li>@DrawableRes<br></li><li>@IntArrayRes<br></li><li>@IntegerRes<br></li><li>@LayoutRes<br></li><li>@MovieRes<br></li><li>@TextRes<br></li><li>@TextArrayRes<br></li><li>@StringArrayRes</li></p>
<p>####@Extra<br>     @EActivity<br>    public class MyActivity extends Activity {</p>
<pre><code>  @Extra(&quot;myStringExtra&quot;)
  String myMessage;

  @Extra(&quot;myDateExtra&quot;)
  Date myDateExtraWithDefaultValue = new Date();

}
</code></pre><p>或者：</p>
<pre><code> @EActivity
public class MyActivity extends Activity {

  // The name of the extra will be &quot;myMessage&quot;，名字必须一致
  @Extra
  String myMessage;
}
</code></pre><p>传值：</p>
<pre><code>MyActivity_.intent().myMessage(&quot;hello&quot;).start() ;
</code></pre><p>####@SystemService<br>     @EActivity<br>    public class MyActivity extends Activity {//<br>      @SystemService<br>      NotificationManager notificationManager;</p>
<pre><code>}
</code></pre><p>####@Click<br>     @Click(R.id.myButton)<br>    void myButtonWasClicked() {<br>        […]<br>    }<br>    @Click<br>    void anotherButton() {//如果不指定则函数名和id对应<br>        […]<br>    }<br>    @Click<br>    void yetAnotherButton(View clickedView) {<br>        […]<br>    }</p>
<p>其他点击事件：</p>
<p><li>Clicks with @Click</li></p>
<p><li>Long clicks with @LongClick</li></p>
<p><li>Touches with @Touch</li></p>
<p>####AdapterViewEvents </p>
<p><li>Item clicks with @ItemClick</li></p>
<p><li>Long item clicks with @ItemLongClick</li></p>
<p><li>Item selection with @ItemSelect</li></p>
<p>有两种方式调用：</p>
<p><li>1.</li></p>
<pre><code> @EActivity(R.layout.my_list)
public class MyListActivity extends Activity {

    // ...

    @ItemClick
    public void myListItemClicked(MyItem clickedItem) {//MyItem是adapter的实体类，等同于adapter.getItem(position)

    }

    @ItemLongClick
    public void myListItemLongClicked(MyItem clickedItem) {

    }

    @ItemSelect
    public void myListItemSelected(boolean selected, MyItem selectedItem) {

    }

}
</code></pre><p><li>2.</li></p>
<pre><code> @EActivity(R.layout.my_list)
public class MyListActivity extends Activity {

    // ...

    @ItemClick
    public void myListItemClicked(int position) {//位置id

    }

    @ItemLongClick
    public void myListItemLongClicked(int position) {

    }

    @ItemSelect
    public void myListItemSelected(boolean selected, int position) {

    }

}
</code></pre><p>####@SeekBarProgressChange<br>     //等同于SeekBar.OnSeekBarChangeListener.onProgressChanged(SeekBar, int, boolean)<br>         @SeekBarProgressChange(R.id.seekBar)<br>         void onProgressChangeOnSeekBar(SeekBar seekBar, int progress, boolean fromUser) {<br>            // Something Here<br>         }</p>
<pre><code>@SeekBarProgressChange(R.id.seekBar)
void onProgressChangeOnSeekBar(SeekBar seekBar, int progress) {
   // Something Here
}

@SeekBarProgressChange({R.id.seekBar1, R.id.seekBar2})
void onProgressChangeOnSeekBar(SeekBar seekBar) {
   // Something Here
}

@SeekBarProgressChange({R.id.seekBar1, R.id.seekBar2})
void onProgressChangeOnSeekBar() {
   // Something Here
}
</code></pre><p>@SeekBarTouchStart 和 @SeekBarTouchStop<br>接受开始和结束事件的监听</p>
<p>####@HttpsClient<br>     @HttpsClient<br>    HttpClient httpsClient;</p>
<p>示例：</p>
<pre><code> @EActivity
public class MyActivity extends Activity {

    @HttpsClient(trustStore=R.raw.cacerts,
        trustStorePwd=&quot;changeit&quot;, 
        hostnameVerif=true)
    HttpClient httpsClient;

    @AfterInject
    @Background
    public void securedRequest() {
        try {
            HttpGet httpget = new HttpGet(&quot;https://www.verisign.com/&quot;);
            HttpResponse response = httpsClient.execute(httpget);
            doSomethingWithResponse(response);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    @UiThread
    public void doSomethingWithResponse(HttpResponse resp) {
        Toast.makeText(this, &quot;HTTP status &quot; + resp.getStatusLine().getStatusCode(), Toast.LENGTH_LONG).show();
    }
}
</code></pre><p>####@TextChange<br>     @TextChange(R.id.helloTextView)<br>     void onTextChangesOnHelloTextView(CharSequence text, TextView hello, int before, int start, int count) {<br>        // Something Here<br>     }</p>
<pre><code>@TextChange
void helloTextViewTextChanged(TextView hello) {
   // Something Here
}

@TextChange({R.id.editText, R.id.helloTextView})
void onTextChangesOnSomeTextViews(TextView tv, CharSequence text) {
   // Something Here
}

@TextChange(R.id.helloTextView)
void onTextChangesOnHelloTextView() {
   // Something Here
}
</code></pre><p>####@BeforeTextChange<br>     @BeforeTextChange(R.id.helloTextView)<br>     void beforeTextChangedOnHelloTextView(TextView hello, CharSequence text, int start, int count, int after) {<br>        // Something Here<br>     }</p>
<pre><code>@BeforeTextChange
void helloTextViewBeforeTextChanged(TextView hello) {
   // Something Here
}

@BeforeTextChange({R.id.editText, R.id.helloTextView})
void beforeTextChangedOnSomeTextViews(TextView tv, CharSequence text) {
   // Something Here
}

@BeforeTextChange(R.id.helloTextView)
void beforeTextChangedOnHelloTextView() {
   // Something Here
}
</code></pre><p>####@AfterTextChange<br>     @AfterTextChange(R.id.helloTextView)<br>     void afterTextChangedOnHelloTextView(Editable text, TextView hello) {<br>        // Something Here<br>     }</p>
<pre><code>@AfterTextChange
void helloTextViewAfterTextChanged(TextView hello) {
   // Something Here
}

@AfterTextChange({R.id.editText, R.id.helloTextView})
void afterTextChangedOnSomeTextViews(TextView tv, Editable text) {
   // Something Here
}

@AfterTextChange(R.id.helloTextView)
void afterTextChangedOnHelloTextView() {
   // Something Here
}
</code></pre><p>书写参考：<a href="http://www.csdn123.com/html/topnews201408/29/729.htm" target="_blank" rel="external">出处</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/13/SwipeRefreshLayout-RecyclerView-实现下拉刷新和上拉加载更多/" itemprop="url">
                  SwipeRefreshLayout + RecyclerView 实现下拉刷新和上拉加载更多
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-10-13T15:09:26+08:00" content="2015-10-13">
              2015-10-13
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##SwipeRefreshLayout + RecyclerView 实现下拉刷新和上拉加载更多<br>SwipeRefreshLayout 是谷歌公司推出的用于下拉刷新的控件，SwipeRefreshLayout已经被放到了sdk中，在Version 19.1之后SwipeRefreshLayout 被放到support v4中。</p>
<p>源码在SDK\sdk\extras\android\support\v4\src\java\android\support\v4\widget\SwipeRefreshLayout.java</p>
<p><b>SwipeRefreshLayout只提供了下拉刷新，我们需要添加上拉加载更多</b></p>
<p><img src="http://7xl32g.com1.z0.glb.clouddn.com/swipeRefreshLayout.gif"></p>
<p>#####SwipeRefreshLayout中要注意的API:</p>
<p><li>setOnRefreshListener(OnRefreshListener listener)  设置下拉监听，当用户下拉的时候会去执行回调</li></p>
<p><li>setColorSchemeColors(int… colors) 设置 进度条的颜色变化，最多可以设置4种颜色</li></p>
<p><li>setProgressViewOffset(boolean scale, int start, int end) 调整进度条距离屏幕顶部的距离 (19) </li></p>
<p><li>setRefreshing(boolean refreshing) 设置SwipeRefreshLayout当前是否处于刷新状态，一般是在请求数据的时候设置为true，在数据被加载到View中后，设置为false。</li></p>
<p>###添加上拉加载：对recyclerview添加addOnscrollListener,滑动到可见的最后一个item的时候，让mSwipeRefreshLayout.setRefreshing(true);加载数据，发handler ,然后消失。</p>
<p>#####布局文件：SwipeRefreshLayout要嵌套在listview、srcrollview、recyclerview等的外边</p>
<pre><code>&lt;android.support.v4.widget.SwipeRefreshLayout
     android:id=&quot;@+id/swiperefreshlayout&quot;
     android:layout_height=&quot;wrap_content&quot;
     android:layout_width=&quot;match_parent&quot;
     &gt;
     &lt;android.support.v7.widget.RecyclerView
         android:id=&quot;@+id/recyclerview&quot;
         android:layout_height=&quot;wrap_content&quot;
         android:layout_width=&quot;match_parent&quot;
         &gt;&lt;/android.support.v7.widget.RecyclerView&gt;
 &lt;/android.support.v4.widget.SwipeRefreshLayout&gt;
</code></pre><p>#####Activity</p>
<pre><code>mRecyclerView= (RecyclerView) findViewById(R.id.recyclerview);
layoutManager=new LinearLayoutManager(this);
mRecyclerView.setLayoutManager(layoutManager);
mRecyclerView.addItemDecoration(new DividerItemDecoration(this, DividerItemDecoration.VERTICAL_LIST));
adapter=new SimpleAdapter(this,mDatas);
mRecyclerView.setAdapter(adapter);
mSwipeRefreshLayout= (SwipeRefreshLayout) findViewById(R.id.swiperefreshlayout);
mSwipeRefreshLayout.setColorSchemeResources(android.R.color.holo_blue_bright, android.R.color.holo_green_light,
        android.R.color.holo_orange_light, android.R.color.holo_red_light);
 //此处是android自带的只支持下拉刷新
mSwipeRefreshLayout.setOnRefreshListener(new SwipeRefreshLayout.OnRefreshListener() {
    @Override
    public void onRefresh() {
        handler.sendEmptyMessageDelayed(MSG_COMPLETE, 3000);
    }
});
//此处我们是对recyclerview添加scrollListener ,监听滑倒最后一个可见的条目的时候，刷新加载数据
mRecyclerView.addOnScrollListener(new RecyclerView.OnScrollListener() {
    @Override
    public void onScrollStateChanged(RecyclerView recyclerView, int newState) {
        super.onScrollStateChanged(recyclerView, newState);
         //SCROLL_STATE_DRAGGING  和   SCROLL_STATE_IDLE 两种效果自己看着来
        if(newState == RecyclerView.SCROLL_STATE_IDLE &amp;&amp; lastVisibleItem + 1 == adapter.getItemCount()){
            mSwipeRefreshLayout.setRefreshing(true);
            handler.sendEmptyMessageDelayed(MSG_COMPLETE,3000);
        }
    }

    @Override
    public void onScrolled(RecyclerView recyclerView, int dx, int dy) {
        super.onScrolled(recyclerView, dx, dy);
        lastVisibleItem=layoutManager.findLastVisibleItemPosition();
    }
});
</code></pre><p>handler模拟加载数据</p>
<pre><code>public Handler handler=new Handler(){
        @Override
        public void handleMessage(Message msg) {
            super.handleMessage(msg);
            switch (msg.what){
                case MSG_COMPLETE:
                    List&lt;String&gt; lists=new ArrayList&lt;&gt;();
                    for (int i = 0; i &lt;6 ; i++) {
                        lists.add(&quot;刷新&quot;+i);
                    }
                    mDatas.addAll(0,lists);
                    adapter.notifyDataSetChanged();
                    mSwipeRefreshLayout.setRefreshing(false);
                    break;
            }
        }
    };
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/10/Android-RecyclerView使用全解析（一）/" itemprop="url">
                  Android RecyclerView使用全解析
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-10-10T15:04:10+08:00" content="2015-10-10">
              2015-10-10
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#RecyclerView的使用解析</p>
<p>###一、概述<br>整体上看RecyclerView架构，提供了一种插拔式的体验，高度的解耦，异常的灵活，通过设置它提供的不同LayoutManager，ItemDecoration , ItemAnimator实现令人瞠目的效果。</p>
<p><li>你想要控制其显示的方式，请通过布局管理器LayoutManager（代替listview、gridview、horgiridview、瀑布流）</li></p>
<p><li>你想要控制Item间的间隔（可绘制），请通过ItemDecoration（默认没有间隔，特别难看）</li></p>
<p><li>你想要控制Item增删的动画，请通过ItemAnimator</li></p>
<p><li>你想要控制点击、长按事件，请自己写（接口回调）</li></p>
<p>###二、导入<br>    compile ‘com.android.support:recyclerview-v7:23.0.1’</p>
<p>###三、使用</p>
<p>RecyclerView的使用代码：</p>
<pre><code>mRecyclerView = findView(R.id.id_recyclerview);
//设置布局管理器  
mRecyclerView.setLayoutManager(layoutManager);
//设置adapter
mRecyclerView.setAdapter(adapter)
//设置Item增加、移除动画
mRecyclerView.setItemAnimator(new DefaultItemAnimator());
//添加分割线
mRecyclerView.addItemDecoration(new DividerItemDecoration(
                getActivity(), DividerItemDecoration.HORIZONTAL_LIST));
</code></pre><p>RecyclerView代表的意义是，我只管Recycler View，也就是说RecyclerView只管回收与复用View，其他的你可以自己去设置。可以看出其高度的解耦，给予你充分的定制自由（所以你才可以轻松的通过这个控件实现ListView,GirdView，瀑布流等效果）。</p>
<p>####RecyclerView设置Adapter<br>RecyclerView 自带adapter、viewHolder 继承他们</p>
<pre><code>public class SimpleAdapter extends RecyclerView.Adapter&lt;SimpleAdapter.MyViewHolder&gt;{    

    private List&lt;String&gt; mDatas;
    public Context context;
    public SimpleAdapter(MainActivity mainActivity, List&lt;String&gt; mDatas) {
        this.mDatas=mDatas;
        this.context=mainActivity;
    }

    @Override
    public MyViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {
        MyViewHolder holder = new MyViewHolder(LayoutInflater.from(context).inflate(R.layout.recycle_item, parent, false));
        return holder;
    }

    @Override
    public void onBindViewHolder(MyViewHolder holder, int position) {
         holder.tv.setText(mDatas.get(position));
    }

    @Override
    public int getItemCount() {
        return mDatas.size();
    }

    class MyViewHolder extends RecyclerView.ViewHolder{

        TextView tv;
        public MyViewHolder(View itemView) {
            super(itemView);
            tv= (TextView) itemView.findViewById(R.id.tv);
        }
}
}
</code></pre><p><img src="http://7xl32g.com1.z0.glb.clouddn.com/recyclerview_type.png"></p>
<p>####替代ListView<br><img src="http://7xl32g.com1.z0.glb.clouddn.com/listvioew_nodivider.png" width="300dp" height="500dp"></p>
<pre><code>mRecyclerView= (RecyclerView) findViewById(R.id.recycleview);
RecyclerView.LayoutManager layoutManager=new LinearLayoutManager(this);
mRecyclerView.setLayoutManager(layoutManager);
</code></pre><p>演示效果你会发现item之间没有分界线，你去找时，你又会发现recyclerview没有divider这个属性。此时有两个办法可以解决：</p>
<p><li>1.你可以给item的布局设置margin值</li></p>
<p><li>2.定制分割线</li></p>
<p>#####ItemDecoration<br>我们可以通过该方法添加分割线： </p>
<pre><code>mRecyclerView.addItemDecoration() 
</code></pre><p>该方法的参数为RecyclerView.ItemDecoration，该类为抽象类，官方目前并没有提供默认的实现类（我觉得最好能提供几个）。 </p>
<p>该类的源码：</p>
<pre><code>public static abstract class ItemDecoration {

public void onDraw(Canvas c, RecyclerView parent, State state) {
            onDraw(c, parent);
 }


public void onDrawOver(Canvas c, RecyclerView parent, State state) {
            onDrawOver(c, parent);
 }

public void getItemOffsets(Rect outRect, View view, RecyclerView parent, State state) {
            getItemOffsets(outRect, ((LayoutParams) view.getLayoutParams()).getViewLayoutPosition(),
                    parent);
}

@Deprecated
public void getItemOffsets(Rect outRect, int itemPosition, RecyclerView parent) {
            outRect.set(0, 0, 0, 0);
 }
</code></pre><p>当我们调用mRecyclerView.addItemDecoration()方法添加decoration的时候，RecyclerView在绘制的时候，去会绘制decorator，即调用该类的onDraw和onDrawOver方法，</p>
<p><li>onDraw方法先于drawChildren</li></p>
<p><li>onDrawOver在drawChildren之后，一般我们选择复写其中一个即可。</li></p>
<p><li>getItemOffsets 可以通过outRect.set()为每个Item设置一定的偏移量，主要用于绘制Decorator。</li></p>
<p>接下来我们看一个RecyclerView.ItemDecoration的实现类，该类很好的实现了RecyclerView添加分割线（当使用LayoutManager为LinearLayoutManager时）。 </p>
<p>#####DividerItemDecoration</p>
<pre><code>public class DividerItemDecoration extends RecyclerView.ItemDecoration {

    private static final int[] ATTRS = new int[]{
            android.R.attr.listDivider
    };

    public static final int HORIZONTAL_LIST = LinearLayoutManager.HORIZONTAL;

    public static final int VERTICAL_LIST = LinearLayoutManager.VERTICAL;

    private Drawable mDivider;

    private int mOrientation;

    public DividerItemDecoration(Context context, int orientation) {
        final TypedArray a = context.obtainStyledAttributes(ATTRS);
        mDivider = a.getDrawable(0);
        a.recycle();
        setOrientation(orientation);
    }

    public void setOrientation(int orientation) {
        if (orientation != HORIZONTAL_LIST &amp;&amp; orientation != VERTICAL_LIST) {
            throw new IllegalArgumentException(&quot;invalid orientation&quot;);
        }
        mOrientation = orientation;
    }

    @Override
    public void onDraw(Canvas c, RecyclerView parent) {
        Log.v(&quot;recyclerview - itemdecoration&quot;, &quot;onDraw()&quot;);

        if (mOrientation == VERTICAL_LIST) {
            drawVertical(c, parent);
        } else {
            drawHorizontal(c, parent);
        }

    }


    public void drawVertical(Canvas c, RecyclerView parent) {
        final int left = parent.getPaddingLeft();
        final int right = parent.getWidth() - parent.getPaddingRight();

        final int childCount = parent.getChildCount();
        for (int i = 0; i &lt; childCount; i++) {
            final View child = parent.getChildAt(i);
            android.support.v7.widget.RecyclerView v = new android.support.v7.widget.RecyclerView(parent.getContext());
            final RecyclerView.LayoutParams params = (RecyclerView.LayoutParams) child
                    .getLayoutParams();
            final int top = child.getBottom() + params.bottomMargin;
            final int bottom = top + mDivider.getIntrinsicHeight();
            mDivider.setBounds(left, top, right, bottom);
            mDivider.draw(c);
        }
    }

    public void drawHorizontal(Canvas c, RecyclerView parent) {
        final int top = parent.getPaddingTop();
        final int bottom = parent.getHeight() - parent.getPaddingBottom();

        final int childCount = parent.getChildCount();
        for (int i = 0; i &lt; childCount; i++) {
            final View child = parent.getChildAt(i);
            final RecyclerView.LayoutParams params = (RecyclerView.LayoutParams) child
                    .getLayoutParams();
            final int left = child.getRight() + params.rightMargin;
            final int right = left + mDivider.getIntrinsicHeight();
            mDivider.setBounds(left, top, right, bottom);
            mDivider.draw(c);
        }
    }

    @Override
    public void getItemOffsets(Rect outRect, int itemPosition, RecyclerView parent) {
        if (mOrientation == VERTICAL_LIST) {
            outRect.set(0, 0, 0, mDivider.getIntrinsicHeight());
        } else {
            outRect.set(0, 0, mDivider.getIntrinsicWidth(), 0);
        }
    }
}
</code></pre><p>该实现类可以看到通过读取系统主题中的 android.R.attr.listDivider作为Item间的分割线，并且支持横向和纵向。</p>
<p>获取到listDivider以后，该属性的值是个Drawable，在getItemOffsets中，outRect去设置了绘制的范围。onDraw中实现了真正的绘制。</p>
<p>我们在原来的代码中添加一句：</p>
<pre><code>mRecyclerView.addItemDecoration(new DividerItemDecoration(this,
DividerItemDecoration.VERTICAL_LIST));
</code></pre><p><img src="http://7xl32g.com1.z0.glb.clouddn.com/listview_divider.png" width="300dp" height="500dp"></p>
<p>该分割线是系统默认的，你可以在theme.xml中找到该属性的使用情况。那么，使用系统的listDivider有什么好处呢？就是方便我们去随意的改变，该属性我们可以直接声明在：</p>
<pre><code> &lt;!-- Application theme. --&gt;
&lt;style name=&quot;AppTheme&quot; parent=&quot;AppBaseTheme&quot;&gt;
  &lt;item name=&quot;android:listDivider&quot;&gt;@drawable/divider_bg&lt;/item&gt;  
&lt;/style&gt;
</code></pre><p>然后自己写个drawable即可，下面我们换一种分隔符：</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:shape=&quot;rectangle&quot; &gt;

    &lt;gradient
        android:centerColor=&quot;#ff00ff00&quot;
        android:endColor=&quot;#ff0000ff&quot;
        android:startColor=&quot;#ffff0000&quot;
        android:type=&quot;linear&quot; /&gt;
    &lt;size android:height=&quot;4dp&quot;/&gt;

&lt;/shape&gt;
</code></pre><p><img src="http://7xl32g.com1.z0.glb.clouddn.com/listview_custom_divider.png" width="300dp" height="500dp"></p>
<p>####LayoutManager<br>上面实现了类似ListView样子的Demo，通过使用其默认的LinearLayoutManager。</p>
<p>RecyclerView.LayoutManager吧，这是一个抽象类，好在系统提供了3个实现类：</p>
<p><li>LinearLayoutManager 线性管理器，支持横向、纵向。</li></p>
<p><li>GridLayoutManager 网格布局管理器</li></p>
<p><li>StaggeredGridLayoutManager 瀑布流式布局管理器</li></p>
<p>上面我们已经初步体验了下LinearLayoutManager，接下来看GridLayoutManager。</p>
<p>#####GridLayoutManager</p>
<p>我们尝试去实现类似GridView，秒秒钟的事情：</p>
<pre><code>//mRecyclerView.setLayoutManager(new LinearLayoutManager(this));
  mRecyclerView.setLayoutManager(new GridLayoutManager(this,4));   //4列
</code></pre><p>只需要修改LayoutManager即可，还是很nice的。</p>
<p>当然了，改为GridLayoutManager以后，对于分割线，前面的DividerItemDecoration就不适用了，主要是因为它在绘制的时候，比如水平线，针对每个child的取值为：</p>
<pre><code>final int left = parent.getPaddingLeft();
final int right = parent.getWidth() - parent.getPaddingRight();
</code></pre><p>因为每个Item一行，这样是没问题的。而GridLayoutManager时，一行有多个childItem，这样就多次绘制了，并且GridLayoutManager时，Item如果为最后一列（则右边无间隔线）或者为最后一行（底部无分割线）。</p>
<p>针对上述，我们编写了DividerGridItemDecoration。</p>
<pre><code>public class DividerGridItemDecoration extends RecyclerView.ItemDecoration
{

    private static final int[] ATTRS = new int[] { android.R.attr.listDivider };
    private Drawable mDivider;

    public DividerGridItemDecoration(Context context)
    {
        final TypedArray a = context.obtainStyledAttributes(ATTRS);
        mDivider = a.getDrawable(0);
        a.recycle();
    }

    @Override
    public void onDraw(Canvas c, RecyclerView parent, State state)
    {

        drawHorizontal(c, parent);
        drawVertical(c, parent);

    }

    private int getSpanCount(RecyclerView parent)
    {
        // 列数
        int spanCount = -1;
        LayoutManager layoutManager = parent.getLayoutManager();
        if (layoutManager instanceof GridLayoutManager)
        {

            spanCount = ((GridLayoutManager) layoutManager).getSpanCount();
        } else if (layoutManager instanceof StaggeredGridLayoutManager)
        {
            spanCount = ((StaggeredGridLayoutManager) layoutManager)
                    .getSpanCount();
        }
        return spanCount;
    }

    public void drawHorizontal(Canvas c, RecyclerView parent)
    {
        int childCount = parent.getChildCount();
        for (int i = 0; i &lt; childCount; i++)
        {
            final View child = parent.getChildAt(i);
            final RecyclerView.LayoutParams params = (RecyclerView.LayoutParams) child
                    .getLayoutParams();
            final int left = child.getLeft() - params.leftMargin;
            final int right = child.getRight() + params.rightMargin
                    + mDivider.getIntrinsicWidth();
            final int top = child.getBottom() + params.bottomMargin;
            final int bottom = top + mDivider.getIntrinsicHeight();
            mDivider.setBounds(left, top, right, bottom);
            mDivider.draw(c);
        }
    }

    public void drawVertical(Canvas c, RecyclerView parent)
    {
        final int childCount = parent.getChildCount();
        for (int i = 0; i &lt; childCount; i++)
        {
            final View child = parent.getChildAt(i);

            final RecyclerView.LayoutParams params = (RecyclerView.LayoutParams) child
                    .getLayoutParams();
            final int top = child.getTop() - params.topMargin;
            final int bottom = child.getBottom() + params.bottomMargin;
            final int left = child.getRight() + params.rightMargin;
            final int right = left + mDivider.getIntrinsicWidth();

            mDivider.setBounds(left, top, right, bottom);
            mDivider.draw(c);
        }
    }

    private boolean isLastColum(RecyclerView parent, int pos, int spanCount,
            int childCount)
    {
        LayoutManager layoutManager = parent.getLayoutManager();
        if (layoutManager instanceof GridLayoutManager)
        {
            if ((pos + 1) % spanCount == 0)// 如果是最后一列，则不需要绘制右边
            {
                return true;
            }
        } else if (layoutManager instanceof StaggeredGridLayoutManager)
        {
            int orientation = ((StaggeredGridLayoutManager) layoutManager)
                    .getOrientation();
            if (orientation == StaggeredGridLayoutManager.VERTICAL)
            {
                if ((pos + 1) % spanCount == 0)// 如果是最后一列，则不需要绘制右边
                {
                    return true;
                }
            } else
            {
                childCount = childCount - childCount % spanCount;
                if (pos &gt;= childCount)// 如果是最后一列，则不需要绘制右边
                    return true;
            }
        }
        return false;
    }

    private boolean isLastRaw(RecyclerView parent, int pos, int spanCount,
            int childCount)
    {
        LayoutManager layoutManager = parent.getLayoutManager();
        if (layoutManager instanceof GridLayoutManager)
        {
            childCount = childCount - childCount % spanCount;
            if (pos &gt;= childCount)// 如果是最后一行，则不需要绘制底部
                return true;
        } else if (layoutManager instanceof StaggeredGridLayoutManager)
        {
            int orientation = ((StaggeredGridLayoutManager) layoutManager)
                    .getOrientation();
            // StaggeredGridLayoutManager 且纵向滚动
            if (orientation == StaggeredGridLayoutManager.VERTICAL)
            {
                childCount = childCount - childCount % spanCount;
                // 如果是最后一行，则不需要绘制底部
                if (pos &gt;= childCount)
                    return true;
            } else
            // StaggeredGridLayoutManager 且横向滚动
            {
                // 如果是最后一行，则不需要绘制底部
                if ((pos + 1) % spanCount == 0)
                {
                    return true;
                }
            }
        }
        return false;
    }

    @Override
    public void getItemOffsets(Rect outRect, int itemPosition,
            RecyclerView parent)
    {
        int spanCount = getSpanCount(parent);
        int childCount = parent.getAdapter().getItemCount();
        if (isLastRaw(parent, itemPosition, spanCount, childCount))// 如果是最后一行，则不需要绘制底部
        {
            outRect.set(0, 0, mDivider.getIntrinsicWidth(), 0);
        } else if (isLastColum(parent, itemPosition, spanCount, childCount))// 如果是最后一列，则不需要绘制右边
        {
            outRect.set(0, 0, 0, mDivider.getIntrinsicHeight());
        } else
        {
            outRect.set(0, 0, mDivider.getIntrinsicWidth(),
                    mDivider.getIntrinsicHeight());
        }
    }
}
</code></pre><p>主要在getItemOffsets方法中，去判断如果是最后一行，则不需要绘制底部；如果是最后一列，则不需要绘制右边，整个判断也考虑到了StaggeredGridLayoutManager的横向和纵向，所以稍稍有些复杂。最重要还是去理解，如何绘制什么的不重要。一般如果仅仅是希望有空隙，还是去设置item的margin方便。</p>
<p><img src="http://7xl32g.com1.z0.glb.clouddn.com/gridview.png" width="300dp" height="500dp"></p>
<p>#####StaggeredGridLayoutMnager</p>
<p>瀑布流式的布局，其实他可以实现GridLayoutManager一样的功能，仅仅按照下列代码：</p>
<pre><code>// mRecyclerView.setLayoutManager(new GridLayoutManager(this,4));
   mRecyclerView.setLayoutManager(new StaggeredGridLayoutManager(4,        StaggeredGridLayoutManager.VERTICAL));
</code></pre><p>这两种写法显示的效果是一致的，但是注意StaggeredGridLayoutManager构造的第二个参数传一个orientation，如果传入的是StaggeredGridLayoutManager.VERTICAL代表有多少列；那么传入的如果是StaggeredGridLayoutManager.HORIZONTAL就代表有多少行，比如本例如果改为：</p>
<pre><code>mRecyclerView.setLayoutManager(new StaggeredGridLayoutManager(4,
        StaggeredGridLayoutManager.HORIZONTAL));
</code></pre><p>可以看到，固定为4行，变成了左右滑动。有一点需要注意，如果是横向的时候，item的宽度需要注意去设置，毕竟横向的宽度没有约束了，应为控件可以横向滚动了。<br>如果你需要一样横向滚动的GridView，那么恭喜你。</p>
<p><img src="http://7xl32g.com1.z0.glb.clouddn.com/hor_gridview.gif"></p>
<p>#####用RecyclerView实现瀑布流<br><img src="http://7xl32g.com1.z0.glb.clouddn.com/pull.png" width="300dp" height="500dp"></p>
<p>只要使用StaggeredGridLayoutManager我们就已经实现了，只是上面的item布局我们使用了固定的高度，下面我们仅仅在适配器的onBindViewHolder方法中为我们的item设置个随机的高度</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">mHeights = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; mDatas.size(); i++) &#123;</div><div class="line">           mHeights.add((<span class="keyword">int</span>) (<span class="number">100</span> + Math.random() * <span class="number">300</span>));    <span class="comment">//产生100-400的随机高度</span></div><div class="line">       &#125;</div><div class="line"></div><div class="line"><span class="meta">@Override</span></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBindViewHolder</span><span class="params">(PullViewHolder holder, <span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line"></div><div class="line">       ViewGroup.LayoutParams lp = holder.itemView.getLayoutParams();</div><div class="line">       lp.height=mHeights.get(position);</div><div class="line">       holder.itemView.setLayoutParams(lp);          <span class="comment">//设置item的高度</span></div><div class="line">       holder.tv.setText(mDatas.get(position));</div><div class="line"></div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p>####ItemAnimator<br>ItemAnimator也是一个抽象类，好在系统为我们提供了一种默认的实现类，期待系统多<br>添加些默认的实现。</p>
<p>借助默认的实现，当Item添加和移除的时候，添加动画效果很简单:</p>
<pre><code>// 设置item动画
mRecyclerView.setItemAnimator(new DefaultItemAnimator());
</code></pre><p>注意，这里更新数据集不是用adapter.notifyDataSetChanged()而是<br>notifyItemInserted(position)与notifyItemRemoved(position)<br>否则没有动画效果。 </p>
<p>上述为adapter中添加了两个方法：</p>
<pre><code>public void addData(int position) {
        mDatas.add(position, &quot;Insert One&quot;);
        notifyItemInserted(position);
    }

    public void removeData(int position) {
            mDatas.remove(position);
        notifyItemRemoved(position);
    }
</code></pre><p>Activity中点击MenuItem触发：</p>
<pre><code>@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    getMenuInflater().inflate(R.menu.main, menu);
    return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item)
{
    switch (item.getItemId())
    {
    case R.id.id_action_add:
        mAdapter.addData(1);
        break;
    case R.id.id_action_delete:
        mAdapter.removeData(1);
        break;
    }
    return true;
}
</code></pre><p><img src="http://7xl32g.com1.z0.glb.clouddn.com/pull_animator.gif"><br>当然了只提供了一种动画，那么我们肯定可以去自定义各种nice的动画效果。 </p>
<p>高兴的是，github上已经有很多类似的项目了，这里我们直接引用下：RecyclerViewItemAnimators，大家自己下载查看。 </p>
<p>提供了SlideInOutLeftItemAnimator,SlideInOutRightItemAnimator,<br>SlideInOutTopItemAnimator,SlideInOutBottomItemAnimator等动画效果。</p>
<p>####Click and LongClick<br>不过一个挺郁闷的地方就是，系统没有提供ClickListener和LongClickListener。</p>
<p>不过我们也可以自己去添加，只是会多了些代码而已。 </p>
<p>实现的方式比较多，你可以通过mRecyclerView.addOnItemTouchListener去监听然后去判断手势，<br>当然你也可以通过adapter中自己去提供回调，这里我们选择后者，前者的方式，大家有兴趣自己去实现。</p>
<pre><code>public class PullAdapter extends RecyclerView.Adapter&lt;PullViewHolder&gt; {

    public interface ItemClickListener{
        void onItemClickListener(View view,int position);
        boolean onItemLongClickListener(View view,int position);
    }

    public ItemClickListener mItemClickListener;

    public void setOnItemClickListener(ItemClickListener itemClickListener){
        this.mItemClickListener=itemClickListener;
    }
    @Override
    public void onBindViewHolder(final PullViewHolder holder, int position) {

        ViewGroup.LayoutParams lp = holder.itemView.getLayoutParams();
        lp.height=mHeights.get(position);
        holder.itemView.setLayoutParams(lp);
        holder.tv.setText(mDatas.get(position));
        if(mItemClickListener != null){

            holder.itemView.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    int pos=holder.getLayoutPosition();       //这个位置position注意
                    mItemClickListener.onItemClickListener(holder.itemView,pos);
                }
            });

            holder.itemView.setOnLongClickListener(new View.OnLongClickListener() {
                @Override
                public boolean onLongClick(View v) {
                    int pos=holder.getLayoutPosition();
                    return  mItemClickListener.onItemLongClickListener(holder.itemView,pos);
                }
            });
        }
    }
</code></pre><p>在Activity中</p>
<pre><code>adapter.setOnItemClickListener(new PullAdapter.ItemClickListener() {
          @Override
          public void onItemClickListener(View view, int position) {
              Toast.makeText(PullActivity.this,&quot;Click&quot;+position,Toast.LENGTH_SHORT).show();
          }

          @Override
          public boolean onItemLongClickListener(View view, int position) {
              Toast.makeText(PullActivity.this,&quot;LongClick&quot;+position,Toast.LENGTH_SHORT).show();
              return true;
          }
      });
</code></pre><p>adapter中自己定义了个接口，然后在onBindViewHolder中去为holder.itemView去设置相应<br>的监听最后回调我们设置的监听。</p>
<p>最后别忘了给item添加一个drawable:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; &gt;
    &lt;item android:state_pressed=&quot;true&quot; android:drawable=&quot;@color/color_item_press&quot;&gt;&lt;/item&gt;
    &lt;item android:drawable=&quot;@color/color_item_normal&quot;&gt;&lt;/item&gt;
&lt;/selector&gt;
</code></pre><p>###总结<br>到此我们基本介绍了RecylerView常见用法，包含了：</p>
<p><li>系统提供了几种LayoutManager的使用；</li></p>
<p><li>如何通过自定义ItemDecoration去设置分割线，或者一些你想作为分隔的drawable，注意这里 </li></p>
<p><li>巧妙的使用了系统的listDivider属性，你可以尝试添加使用divider和dividerHeight属性。</li></p>
<p><li>如何使用ItemAnimator为RecylerView去添加Item移除、添加的动画效果。</li></p>
<p><li>介绍了如何添加ItemClickListener与ItemLongClickListener。</li></p>
<p>可以看到RecyclerView可以实现：</p>
<p><li>ListView的功能</li></p>
<p><li>GridView的功能</li></p>
<p><li>横向ListView的功能，参考Android 自定义RecyclerView 实现真正的Gallery效果</li></p>
<p><li>横向ScrollView的功能</li></p>
<p><li>瀑布流效果</li></p>
<p><li>便于添加Item增加和移除动画</li></p>
<p>通过简单改变下LayoutManager，就可以产生不同的效果，那么我们可以根据手机屏幕的宽度去动态设置LayoutManager，屏幕宽度一般的，显示为ListView；宽度稍大的显示两列的GridView或者瀑布流（或者横纵屏幕切换时变化，有点意思~）；显示的列数和宽度成正比。甚至某些特殊屏幕，让其横向滑动~~再选择一个nice的动画效果，相信这种插件式的编码体验一定会让你迅速爱上RecyclerView。</p>
<p>最后说明：</p>
<p>此文章转载于：<br><a href="http://blog.csdn.net/lmj623565791/article/details/45059587" target="_blank" rel="external">http://blog.csdn.net/lmj623565791/article/details/45059587</a></p>
<p>本文出自:<a href="
http://blog.csdn.net/lmj623565791" target="_blank" rel="external">【张鸿洋的博客】</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/10/Android沉浸式通知栏的一个开源库SystemBarTint的使用/" itemprop="url">
                  Android沉浸式通知栏的一个开源库SystemBarTint的使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-10-10T14:50:18+08:00" content="2015-10-10">
              2015-10-10
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#使用开源库SystemBarTint实现沉浸式通知栏</p>
<p>###一、导入：<br>      compile ‘com.readystatesoftware.systembartint:systembartint:1.0.3’</p>
<p>###二、使用<br>沉浸式是androd4.4出现的，所以android系统必须是4.4之后的系统才会有此效果</p>
<p>android5.0之后，有一些组件设置主题之后，就会有沉浸式的效果。</p>
<p>这是官方给的例子，确实是这么用</p>
<p>####使用一： （设置颜色）<br>    public class MatchActionBarActivity extends Activity { </p>
<pre><code>    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_match_actionbar);

        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {
            setTranslucentStatus(true);
        }

        SystemBarTintManager tintManager = new SystemBarTintManager(this);
        tintManager.setStatusBarTintEnabled(true);
        tintManager.setStatusBarTintResource(R.color.statusbar_bg);//通知栏所需颜色
        setTranslucentStatus(true);

    }

    @TargetApi(19) 
    private void setTranslucentStatus(boolean on) {
        Window win = getWindow();
        WindowManager.LayoutParams winParams = win.getAttributes();
        final int bits = WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS;
        if (on) {
            winParams.flags |= bits;
        } else {
            winParams.flags &amp;= ~bits;
        }
        win.setAttributes(winParams);
    }

}
</code></pre><p>####使用二：（设置图片）</p>
<pre><code>setSystemBarTintDrawable(getResources().getDrawable(R.drawable.sr_primary));


protected void setSystemBarTintDrawable(Drawable tintDrawable) {
       if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {
           SystemBarTintManager mTintManager = new SystemBarTintManager(this);
           if (tintDrawable != null) {
               mTintManager.setStatusBarTintEnabled(true);
               mTintManager.setTintDrawable(tintDrawable);
           } else {
               mTintManager.setStatusBarTintEnabled(false);
               mTintManager.setTintDrawable(null);
           }
       }

   }
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/10/进入-Material-Design时代（一）之design包/" itemprop="url">
                  进入 Material Design时代（一）之design包
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-10-10T10:25:34+08:00" content="2015-10-10">
              2015-10-10
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#进入 Material Design时代（一）之design包</p>
<p>###一、导入<br>导入design包：</p>
<pre><code>compile &apos;com.android.support:design:23.0.1&apos;    
</code></pre><p>###二、主要使用组件</p>
<h3>AppBarlayout:</h3> 

<p>AppBarLayout是继承LinearLayout实现的一个ViewGroup容器组件，它是为了Material Design设计的App Bar,支持手势滑动操作。</p>
<p>默认的AppBarLayout是垂直方向的，它的作用是把AppBarLayout包裹的内容都作为AppBar。</p>
<p><b>常用效果是：将Toolbar 和Tablayout的组合部分共同构成 AppBar的效果。</b></p>
<p><b>注意：</b>AppBarLayout必须作为Toolbar的父布局容器</p>
<p>AppBarLayout是支持手势滑动效果的，不过的跟CoordinatorLayout配合使用<br><img src="http://7xl32g.com1.z0.glb.clouddn.com/appbarlayout.png"></p>
<h3>Coordinatorlayout:</h3>

<p>CoordinatorLayout是一个增强型的FrameLayout。它的作用有两个：</p>
<p><li>1.作为一个布局的根布局 </li></p>
<p><li>2.最后一个为子视图之间相互协调手势效果的一个协调布局</li></p>
<p>布局文件：</p>
<pre><code>&lt;android.support.design.widget.CoordinatorLayout
    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    android:id=&quot;@+id/main_content&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;&gt;

    &lt;android.support.design.widget.AppBarLayout
        android:id=&quot;@+id/appbar&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:theme=&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot;&gt;

        &lt;android.support.v7.widget.Toolbar
            android:id=&quot;@+id/toolbar&quot;
            android:layout_width=&quot;match_parent&quot;
            android:layout_height=&quot;?attr/actionBarSize&quot;
            android:background=&quot;?attr/colorPrimary&quot;
            app:popupTheme=&quot;@style/ThemeOverlay.AppCompat.Light&quot;
            app:layout_scrollFlags=&quot;scroll|enterAlways&quot; /&gt;

        &lt;android.support.design.widget.TabLayout
            android:id=&quot;@+id/tabs&quot;
            android:layout_width=&quot;match_parent&quot;
            android:layout_height=&quot;wrap_content&quot; /&gt;

    &lt;/android.support.design.widget.AppBarLayout&gt;

    &lt;android.support.v4.view.ViewPager
        android:id=&quot;@+id/viewpager&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;match_parent&quot;
        app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot; /&gt;

    &lt;android.support.design.widget.FloatingActionButton
        android:id=&quot;@+id/fab&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_gravity=&quot;end|bottom&quot;
        android:layout_margin=&quot;@dimen/fab_margin&quot;
        android:src=&quot;@drawable/ic_done&quot; /&gt;

&lt;/android.support.design.widget.CoordinatorLayout&gt;
</code></pre><p>Acitvity:</p>
<pre><code>Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);
setSupportActionBar(toolbar);

final ActionBar ab = getSupportActionBar();
ab.setHomeAsUpIndicator(R.drawable.ic_menu);
 ab.setDisplayHomeAsUpEnabled(true);
TabLayout tabLayout = (TabLayout) findViewById(R.id.tabs);
tabLayout.setupWithViewPager(viewPager);    //design包自带的TabLayout自带和viewpager关联的方法
</code></pre><p>效果：<br><img src="http://7xl32g.com1.z0.glb.clouddn.com/演示coordinatorLayout.gif"></p>
<p>代码介绍：</p>
<p>####1.<br>由于CoordinatorLayout是FrameLayout布局，我们可以通过<br><code avrasm="" class="hljs">android:layout_gravity=bottom|end</code><br>属性来控制组件在整个布局中的位置，比如上面效果中的FAB就是通过android:layout_gravity=”bottom|end”来确定 FAB的位置在底端的最右边的位置。</p>
<p>####2.<br>为了达到上面效果图的手势动画效果，我们必须做如下设置，通过app:layout_scrollFlags=”scroll|enterAlways” 属性来确定哪个组件是可滑动的</p>
<p>设置的layout_scrollFlags有如下几种选项：</p>
<p><li>scroll: 所有想滚动出屏幕的view都需要设置这个flag- 没有设置这个flag的view将被固定在屏幕顶部。</li></p>
<p><li>enterAlways: 这个flag让任意向下的滚动都会导致该view变为可见，启用快速“返回模式”。</li></p>
<p><li>enterAlwaysCollapsed: 当你的视图已经设置minHeight属性又使用此标志时，你的视图只能已最小高度进入，只有当滚动视图到达顶部时才扩大到完整高度。</li></p>
<p><li>exitUntilCollapsed: 滚动退出屏幕，最后折叠在顶端。</li></p>
<p>我们上面的布局中 给Toolbar设置了app:layout_scrollFlags属性，因此，Toolbar是可以滚动出屏幕，且向下滚动有可以出现。</p>
<p>####3.<br>为了使得Toolbar可以滑动，我们必须还得有个条件，就是CoordinatorLayout布局下包裹一个可以滑动的布局，比如 RecyclerView，ViewPager,NestedScrollView(经过测试，ListView，ScrollView不支持)具有滑动效果的组件。并且给这些组件设置如下属性来告诉CoordinatorLayout，该组件是带有滑动行为的组件，然后CoordinatorLayout在接受到滑动时会通知AppBarLayout 中可滑动的Toolbar可以滑出屏幕了。</p>
<pre><code>app:layout_behavior=@string/appbar_scrolling_view_behavior
</code></pre><p>####4.总结<br>为了使得Toolbar有滑动效果，必须做到如下三点：</p>
<p><li>CoordinatorLayout必须作为整个布局的父布局容器。</li></p>
<p><li>给需要滑动的组件设置 app:layout_scrollFlags=”scroll|enterAlways” 属性。 (ToolBar)</li></p>
<p><li>给你的可滑动的组件，也就是RecyclerView、ViewPager或者 NestedScrollView 设置如下属性：</li></p>
<pre><code>app:layout_behavior=@string/appbar_scrolling_view_behavior
</code></pre><h3>CollapsingToolbarLayout:</h3>

<p>CollapsingToolbarLayout包裹 Toolbar 的时候提供一个可折叠的 Toolbar，一般作为AppbarLayout的子视图使用。</p>
<p>CollapsingToolbarLayout 提供以下属性和方法是用：</p>
<ol>
<li><p>Collapsing title：ToolBar的标题，当CollapsingToolbarLayout全屏没有折叠时，title显示的是大字体，在折叠的过程中，title不断变小到一定大小的效果。你可以调用setTitle(CharSequence)方法设置title。</p>
</li>
<li><p>Content scrim：ToolBar被折叠到顶部固定时候的背景，你可以调用setContentScrim(Drawable)方法改变背景或者 在属性中使用 app:contentScrim=?attr/colorPrimary来改变背景。</p>
</li>
<li><p>Status bar scrim：状态栏的背景，调用方法setStatusBarScrim(Drawable)。还没研究明白，不过这个只能在Android5.0以上系统有效果。</p>
</li>
<li><p>Parallax scrolling children：CollapsingToolbarLayout滑动时，子视图的视觉差，可以通过属性app:layout_collapseParallaxMultiplier=0.6改变。</p>
</li>
<li><p>CollapseMode ：子视图的折叠模式，在子布局中使用。有两种 “pin”：固定模式，在折叠的时候最后固定在顶端；“parallax”：视差模式，在折叠的时候会有个视差折叠的效果。我们可以在布局中使用属性app:layout_collapseMode=parallax来改变。</p>
<p>效果：<br><img src="http://7xl32g.com1.z0.glb.clouddn.com/CollapsingToolbarLayout.gif"></p>
</li>
</ol>
<p>布局文件：</p>
<pre><code>&lt;android.support.design.widget.CoordinatorLayout
    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    android:id=&quot;@+id/main_content&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:fitsSystemWindows=&quot;true&quot;&gt;

    &lt;android.support.design.widget.AppBarLayout
        android:id=&quot;@+id/appbar&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;@dimen/detail_backdrop_height&quot;
        android:theme=&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot;
        android:fitsSystemWindows=&quot;true&quot;&gt;

        &lt;android.support.design.widget.CollapsingToolbarLayout
            android:id=&quot;@+id/collapsing_toolbar&quot;
            android:layout_width=&quot;match_parent&quot;
            android:layout_height=&quot;match_parent&quot;
            app:layout_scrollFlags=&quot;scroll|exitUntilCollapsed&quot;
            android:fitsSystemWindows=&quot;true&quot;
            app:contentScrim=&quot;?attr/colorPrimary&quot;
            app:expandedTitleMarginStart=&quot;48dp&quot;
            app:expandedTitleMarginEnd=&quot;64dp&quot;&gt;

            &lt;ImageView
                android:id=&quot;@+id/backdrop&quot;
                android:layout_width=&quot;match_parent&quot;
                android:layout_height=&quot;match_parent&quot;
                android:scaleType=&quot;centerCrop&quot;
                android:fitsSystemWindows=&quot;true&quot;
                app:layout_collapseMode=&quot;parallax&quot; /&gt;

            &lt;android.support.v7.widget.Toolbar
                android:id=&quot;@+id/toolbar&quot;
                android:layout_width=&quot;match_parent&quot;
                android:layout_height=&quot;?attr/actionBarSize&quot;
                app:popupTheme=&quot;@style/ThemeOverlay.AppCompat.Light&quot;
                app:layout_collapseMode=&quot;pin&quot; /&gt;

        &lt;/android.support.design.widget.CollapsingToolbarLayout&gt;

    &lt;/android.support.design.widget.AppBarLayout&gt;

    &lt;android.support.v4.widget.NestedScrollView
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;match_parent&quot;
        app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;&gt;

        &lt;LinearLayout
            android:layout_width=&quot;match_parent&quot;
            android:layout_height=&quot;match_parent&quot;
            android:orientation=&quot;vertical&quot;
            android:paddingTop=&quot;24dp&quot;&gt;

            &lt;android.support.v7.widget.CardView
                android:layout_width=&quot;match_parent&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:layout_margin=&quot;@dimen/card_margin&quot;&gt;

                &lt;LinearLayout
                    style=&quot;@style/Widget.CardContent&quot;
                    android:layout_width=&quot;match_parent&quot;
                    android:layout_height=&quot;wrap_content&quot;&gt;

                    &lt;TextView
                        android:layout_width=&quot;match_parent&quot;
                        android:layout_height=&quot;wrap_content&quot;
                        android:text=&quot;Info&quot;
                        android:textAppearance=&quot;@style/TextAppearance.AppCompat.Title&quot; /&gt;

                    &lt;TextView
                        android:layout_width=&quot;match_parent&quot;
                        android:layout_height=&quot;wrap_content&quot;
                        android:text=&quot;@string/cheese_ipsum&quot; /&gt;

                &lt;/LinearLayout&gt;

            &lt;/android.support.v7.widget.CardView&gt;

        &lt;/LinearLayout&gt;

    &lt;/android.support.v4.widget.NestedScrollView&gt;

    &lt;android.support.design.widget.FloatingActionButton
        android:layout_height=&quot;wrap_content&quot;
        android:layout_width=&quot;wrap_content&quot;
        app:layout_anchor=&quot;@id/appbar&quot;
        app:layout_anchorGravity=&quot;bottom|right|end&quot;
        android:src=&quot;@drawable/ic_discuss&quot;
        android:layout_margin=&quot;@dimen/fab_margin&quot;
        android:clickable=&quot;true&quot;/&gt;

&lt;/android.support.design.widget.CoordinatorLayout&gt;
</code></pre><p>Activity:</p>
<pre><code>Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);
setSupportActionBar(toolbar);
getSupportActionBar().setDisplayHomeAsUpEnabled(true);

CollapsingToolbarLayout collaspingToolbar = (CollapsingToolbarLayout) findViewById(R.id.collapsing_toolbar);
collaspingToolbar.setTitle(cheeseName);
ImageView imageview = (ImageView) findViewById(R.id.backdrop);
Glide.with(this).load(Cheeses.getRandomCheeseDrawable()).centerCrop().into(imageview);
</code></pre><p>####总结：</p>
<p>CollapsingToolbarLayout主要是提供一个可折叠的Toolbar容器，对容器中的不同视图设置layout_collapseMode折叠模式，来达到不同的折叠效果。</p>
<p>1.Toolbar 的高度layout_height必须固定，不能 “wrap_content”，否则Toolbar不会滑动，也没有折叠效果。</p>
<p>2.为了能让FloatingActionButton也能折叠且消失出现，我们必须给FAB设置锚点属性</p>
<p><code class="hljs" perl="">app:layout_anchor=@id/appbar</code></p>
<p>意思是FAB浮动按钮显示在哪个布局区域。<br>且设置当前锚点的位置</p>
<p>app:layout_anchorGravity=”bottom|end|right”</p>
<p>意思FAB浮动按钮在这个布局区域的具体位置。<br>两个属性共同作用才是的FAB 浮动按钮也能折叠消失，出现。</p>
<p>3.给需要有折叠效果的组件设置 layout_collapseMode属性。</p>
<p></p><h3>NavigationView:</h3><br>用于侧滑菜单中的menu布局。之前Google在V4包中推出自己的 DrawerLayout作为抽屉侧滑菜单，其实这次谷歌只是将之前的ListView布局替换成NavigationView了。简化了之前ListView写适配器的繁琐。<p></p>
<p>效果：<br><img src="http://7xl32g.com1.z0.glb.clouddn.com/navigationView.png"></p>
<pre><code>&lt;android.support.v4.widget.DrawerLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    android:id=&quot;@+id/drawer_layout&quot;
    android:layout_height=&quot;match_parent&quot;
    android:layout_width=&quot;match_parent&quot;
    android:fitsSystemWindows=&quot;true&quot;&gt;

    &lt;include layout=&quot;@layout/include_list_viewpager&quot;/&gt;   //主界面布局

    &lt;android.support.design.widget.NavigationView        //侧滑菜单布局
        android:id=&quot;@+id/nav_view&quot;
        android:layout_height=&quot;match_parent&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_gravity=&quot;start&quot;
        android:fitsSystemWindows=&quot;true&quot;
        app:headerLayout=&quot;@layout/nav_header&quot;         //侧滑顶部的头布局
        app:menu=&quot;@menu/drawer_view&quot;/&gt;                //侧滑菜单项

&lt;/android.support.v4.widget.DrawerLayout&gt;
</code></pre><p>其中NavigationView 中的 android:layout_gravity=”start” 属性来控制抽屉菜单从哪边滑出，一般“start ”从左边滑出，“end”从右边滑出。</p>
<p>这里最主要的两个属性分别是：</p>
<p>1.app:headerLayout: 给NavigationView添加头部布局</p>
<p>2.app：menu：给NavigationView添加menu菜单布局</p>
<p>nav_header.xml</p>
<pre><code>&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;192dp&quot;
    android:background=&quot;?attr/colorPrimaryDark&quot;
    android:padding=&quot;16dp&quot;
    android:theme=&quot;@style/ThemeOverlay.AppCompat.Dark&quot;
    android:orientation=&quot;vertical&quot;
    android:gravity=&quot;bottom&quot;&gt;

    &lt;TextView
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:text=&quot;Username&quot;
        android:textAppearance=&quot;@style/TextAppearance.AppCompat.Body1&quot;/&gt;

&lt;/LinearLayout&gt;
</code></pre><p>drawer_view.xml (menu布局)</p>
<pre><code>&lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;

    &lt;group android:checkableBehavior=&quot;single&quot;&gt;
        &lt;item
            android:id=&quot;@+id/nav_home&quot;
            android:icon=&quot;@drawable/ic_dashboard&quot;
            android:title=&quot;Home&quot; /&gt;
        &lt;item
            android:id=&quot;@+id/nav_messages&quot;
            android:icon=&quot;@drawable/ic_event&quot;
            android:title=&quot;Messages&quot; /&gt;
        &lt;item
            android:id=&quot;@+id/nav_friends&quot;
            android:icon=&quot;@drawable/ic_headset&quot;
            android:title=&quot;Friends&quot; /&gt;
        &lt;item
            android:id=&quot;@+id/nav_discussion&quot;
            android:icon=&quot;@drawable/ic_forum&quot;
            android:title=&quot;Discussion&quot; /&gt;
    &lt;/group&gt;

    &lt;item android:title=&quot;Sub items&quot;&gt;
        &lt;menu&gt;
            &lt;item
                android:icon=&quot;@drawable/ic_dashboard&quot;
                android:title=&quot;Sub item 1&quot; /&gt;
            &lt;item
                android:icon=&quot;@drawable/ic_forum&quot;
                android:title=&quot;Sub item 2&quot; /&gt;
        &lt;/menu&gt;
    &lt;/item&gt;

&lt;/menu&gt;
</code></pre><p>####java代码使用：</p>
<pre><code>private void initNavigationView(){
        navigationView = (NavigationView) findViewById(R.id.navigationView);
        drawerLayout = (DrawerLayout) findViewById(R.id.drawer_layout);
        //设置侧滑菜单选择监听事件
        navigationView.setNavigationItemSelectedListener(new NavigationView.OnNavigationItemSelectedListener() {
            @Override
            public boolean onNavigationItemSelected(MenuItem menuItem) {
                menuItem.setChecked(true);
                //关闭抽屉侧滑菜单
                drawerLayout.closeDrawers();
                return true;
            }
        });
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        if (item.getItemId() == android.R.id.home){
            //打开抽屉侧滑菜单
            drawerLayout.openDrawer(GravityCompat.START);
        }
        return super.onOptionsItemSelected(item);
    }
</code></pre><p>关于NavigationView中item的字体颜色和icon选中状态颜色是去当前主题theme中的</p>
<pre><code>&lt;--正常状态下字体颜色和icon颜色--&gt;
&lt;item name=&quot;android:textColorPrimary&quot;&gt;@android:color/darker_gray&lt;/item&gt;

&lt;--选中状态icon的颜色和字体颜色--&gt;
 &lt;item name=&quot;colorPrimary&quot;&gt;@color/accent_material_light&lt;/item&gt;&lt;/code&gt;
</code></pre><p>当然你可以通过如下方法或者属性来改变这一状态：</p>
<p><li>setItemBackgroundResource(int)：给menu设置背景资源，对应的属性app:itemBackground </li></p>
<p><li>setItemIconTintList(ColorStateList)：给menu的icon设置颜色，对应的属性app:itemIconTint</li></p>
<p><li>setItemTextColor(ColorStateList)：给menu的item设置字体颜色，对应的属性app:itemTextColor</li></p>
<p></p><h3>SnackBar:</h3><br>当Snackbar在显示的时候，往往出现在屏幕的底部。为了给Snackbar留出空间，浮动操作按钮需要向上移动。<br><img src="http://7xl32g.com1.z0.glb.clouddn.com/snackbar.gif"><p></p>
<pre><code>FloatingActionButton fab = (FloatingActionButton) findViewById(R.id.fab);
        fab.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                Snackbar.make(view, &quot;Here&apos;s a Snackbar&quot;, Snackbar.LENGTH_LONG)
                        .setAction(&quot;Action&quot;, null).show();
            }
        });
</code></pre><p>SnackBar可用于代替Toast弹出再按一次返回的情况。</p>
<p></p><h3><a href="https://github.com/chrisbanes/cheesesquare" target="_blank" rel="external">完整代码地址</a><p></p>
</h3>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/09/Android-Studio插件GsonFormat快速实现JavaBean/" itemprop="url">
                  Android Studio插件GsonFormat快速实现JavaBean
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-10-09T17:22:50+08:00" content="2015-10-09">
              2015-10-09
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#Android Studio插件GsonFormat快速实现JavaBean</p>
<p>#一.安装</p>
<p>###方法一：</p>
<p>1.Android studio File-&gt;Settings..-&gt;Plugins–&gt;Browse repositores..搜索GsonFormat</p>
<p>2.安装插件,重启android studio</p>
<p>###方法二：</p>
<p>1.下载GsonFormat.jar ;</p>
<p>2.Android studio File-&gt;Settings..-&gt;Plugins –&gt;install plugin from disk..导入下载GsonFormat.jar</p>
<p>3.重启android studio  </p>
<p>#二、使用方法</p>
<p>####1.新建一个bean的实体类 </p>
<p>####2.Code –&gt; Generate –&gt;GsonFormat 或者使用Generate的快捷键 Alt+Insert</p>
<p>####3.将写好的简单json格式的粘贴上去，ok就行了</p>
<p>简单的实体类</p>
<pre><code>{
&quot;name&quot;: &quot;小名&quot;,
&quot;gender&quot;: &quot;man&quot;,
&quot;age&quot;: 15,
&quot;height&quot;: &quot;160cm&quot;,
}
</code></pre><p>复杂的实体类</p>
<pre><code>{ 
“name”: “王五”, 
“gender”: “man”, 
“age”: 15, 
“height”: “140cm”, 
“addr”: { 
“province”: “fujian”, 
“city”: “quanzhou”, 
“code”: “300000” 
}, 
“hobby”: [ 
{ 
“name”: “billiards”, 
“code”: “1” 
}, 
{ 
“name”: “computerGame”, 
“code”: “2” 
} 
] 
}
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/09/Jsoup抓取网页数据/" itemprop="url">
                  Jsoup抓取网页数据
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-10-09T16:42:09+08:00" content="2015-10-09">
              2015-10-09
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#Jsoup抓取网页数据</p>
<p>###<a href="http://www.open-open.com/jsoup/" target="_blank" rel="external">jsoup使用文档</a></p>
<p>###Android中使用，首先导入jsoup.jar包<br>    compile ‘org.jsoup:jsoup:1.8.3’</p>
<p>###主要使用方法：还是得看使用文档。</p>
<p>####获取指定数据，无非就是通过 id、class、tag 进行查找<br>     Document doc = Jsoup.connect(“<a href="http://www.quwenlieqi.com/funny/&quot;).get(" target="_blank" rel="external">http://www.quwenlieqi.com/funny/&quot;).get(</a>);<br>     Elements ListDiv =doc.select(“.excerpt”);<br>     for (Element element :ListDiv) {<br>           Elements links = element.getElementsByClass(“thumbnail”);<br>           for(Element link : links){<br>                String href=  link.attr(“href”);<br>                System.out.println(href.toString());<br>                        }<br>          ｝</p>
<p>算了，总之就是（我喜欢使用getElementByClass()）</p>
<pre><code>getElementsByClass(className);
getElementsByTag(&quot;a&quot;);
getElementsById(idName);
</code></pre><p>或者用 <b>doc.select(“<em>“)，element.select(“</em>“);</b></p>
<pre><code>如果通过id的话，*为#；
如果通过class的话，*为.；
如果通过tag的话，*为tag名
</code></pre><p>下面举几个例子：(别人的例子 粘过来的)</p>
<p>###1， 定位<br>通过div的属性值，定位到html的div（块），即所需要内容对应的块。<br>示例代码如下：</p>
<pre><code>&lt;div class=&quot;content&quot;&gt; 
</code></pre><p>###2， 筛选数据<br>a， 通过标签头，在div中继续筛选数据。可能会找到很多的数据，这里会用到循环。见eg1。</p>
<pre><code>//eg1:解析百度音乐 
        Document doc = Jsoup.connect(&quot;http://list.mp3.baidu.com/top/singer/A.html&quot;).get(); 
        Element singerListDiv = doc.getElementsByAttributeValue(&quot;class&quot;, &quot;content&quot;).first(); 
        Elements links = singerListDiv.getElementsByTag(&quot;a&quot;); 

        for (Element link: links) { 
            String linkHref = link.attr(&quot;href&quot;); 
            String linkText = link.text().trim(); 
            System.out.println(linkHref);  
        } 
</code></pre><p>b， 通过标签名，在div中筛选数据，选中此标签内的所有数据。见eg2</p>
<pre><code>//eg2:解析万年历 
    Document doc = Jsoup.connect(&quot;http://www.nongli.com/item4/index.asp?dt=2012-03-03&quot;).get(); 
    Element infoTable = doc.getElementsByAttributeValue(&quot;class&quot;, &quot;table002&quot;).first(); 
    Elements tableLineInfos = infoTable.select(&quot;tr&quot;); 
    for (Element lineInfo : tableLineInfos) { 
        String lineInfoContent = lineInfo.select(&quot;td&quot;).last().text().trim(); 
        System.out.println(&quot;jsoup is :&quot; + lineInfoContent); 
    } 
</code></pre><p>c， 限定筛选条件。如果eg5</p>
<pre><code>//eg5:查找html元素 
    File input = new File(&quot;/tmp/input.html&quot;); 
    Document doc = Jsoup.parse(input, &quot;UTF-8&quot;, &quot;http://www.oschina.net/&quot;); 
    Elements links = doc.select(&quot;a[href]&quot;); // 链接 
    Elements pngs = doc.select(&quot;img[src$=.png]&quot;); // 所有 png 的图片 
    Element masthead = doc.select(&quot;div.masthead&quot;).first();// div with class=masthead 
    Elements resultLinks = doc.select(&quot;h3.r &gt; a&quot;); // direct a after h3 
</code></pre><p>NOTE: <td colspan="2" class="l3">二月15日<br>壬辰年<br>癸卯月<br>丁卯日<br></td></p>
<p>此处不能直接单独获得三组数据，获得的是总的三个数据。可通过正则表达式分解</p>
<p>###3， 获取数据<br>    element.text()即可获得相关数据</p>
<p>###4.获取属性<br>    element.attr(“属性名”);</p>
<p>###5.还有很多没有学习，回来用到了再添加</p>
<p>###plus: Jsoup有灵活的语法，比如通过class-value对指定div块，可通过select(div.value)找到，更多用法请<a href="http://www.open-open.com/jsoup/" target="_blank" rel="external">参考文档！ </a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/08/17/Android图像处理之Bitmap类/" itemprop="url">
                  Android图像处理之Bitmap类
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-08-17T11:49:57+08:00" content="2015-08-17">
              2015-08-17
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Bitmap是Android系统中的图像处理的最重要类之一。用它可以获取图像文件信息，进行图像剪切、旋转、缩放等操作，并可以指定格式保存图像文件。</p>
<p>###一、Bitmap生成</p>
<p>####1.1 BitmapFactory decode出Bitmap<br> Bitmap实现在android.graphics包中。但是Bitmap类的构造函数是私有的，外面并不能实例化，只能是通过JNI实例化。这必然是 某个辅助类提供了创建Bitmap的接口，而这个类的实现通过JNI接口来实例化Bitmap的，这个类就是BitmapFactory。</p>
<p><img src="http://7xl32g.com1.z0.glb.clouddn.com/BitmapFactory&Options.gif">图一、BitmapFactory主要方法及Options选项</p>
<p>利用BitmapFactory可以从一个指定文件中，利用decodeFile()解出Bitmap；也可以定义的图片资源中，利用decodeResource()解出Bitmap。</p>
<p>####1.2 decode时的选项</p>
<p>在使用方法decodeFile()/decodeResource()时，都可以指定一个BitmapFacotry.Options。</p>
<p>利用Options的下列属性，可以指定decode的选项：</p>
<ul><br><li>inPreferredConfig 指定decode到内存中，手机中所采用的编码，可选值定义在Bitmap.Config中。缺省值是ARGB_8888。<br><br></li><li>inJustDecodeBounds 如果设置为true，并不会把图像的数据完全解码，亦即decodeXyz()返回值为null，但是Options的outAbc中解出了图像的基本信息。<br><br></li><li>inSampleSize 设置decode时的缩放比例。<br></li></ul>

<p>利用Options的这些值就可以高效的得到一幅缩略图。</p>
<p><img src="http://7xl32g.com1.z0.glb.clouddn.com/BitmapFactory&decodeFile.gif">图二、BitmapFactory.decodeFile()</p>
<p>先设置inJustDecodeBounds= true，调用decodeFile()得到图像的基本信息[Step#2~4]；</p>
<p>利用图像的宽度（或者高度，或综合）以及目标的宽度，得到inSampleSize值，再设置inJustDecodeBounds= false，调用decodeFile()得到完整的图像数据[Step#5~8]。</p>
<p>先获取比例，再读入数据，如果欲读入大比例缩小的图，将显著的节约内容资源。有时候还会读入大量的缩略图，这效果就更明显了。</p>
<p>###二、利用Bitmap和Matrix实现图像变换<br> Bitmap可以和Matrix结合实现图像的剪切、旋转、缩放等操作。</p>
<p><img src="http://7xl32g.com1.z0.glb.clouddn.com/Bitmap&Scale.gif">图三、Bitmap方法</p>
<p>用源Bitmap通过变换生成新的Bitmap的方法：</p>
<pre><code>public static Bitmap createBitmap(Bitmap source, int x, int y, intwidth, int height, 
            Matrix m, boolean filter) 
public static Bitmap createBitmap(Bitmap source, int x, int y, intwidth, int height) 
public static Bitmap createScaledBitmap(Bitmap src, int dstWidth, 
            int dstHeight,boolean filter)
</code></pre><p>第一个方法是最终的实现，后两种只是对第一种方法的封装。</p>
<p>第二个方法可以从源Bitmap中指定区域(x,y, width, height)中挖出一块来实现剪切；第三个方法可以把源Bitmap缩放为dstWidth x dstHeight的Bitmap。</p>
<p>设置Matrix的Rotate（通过setRotate()）或者Scale（通过setScale()），传入第一个方法，可实现旋转或缩放。</p>
<p><img src="http://7xl32g.com1.z0.glb.clouddn.com/Bitmap&Rotate.gif">图四、Bitmap实现旋转</p>
<p>###三、保存图像文件</p>
<p>经过图像变换之后的Bitmap里的数据可以保存到图像压缩文件里（JPG/PNG）。</p>
<p><img src="http://7xl32g.com1.z0.glb.clouddn.com/Bitmap&Save.gif">图五、保存Bitmap数据到文件</p>
<p>这个操作过程中，Bitmap.compress()方法的参数format可设置JPEG或PNG格式；quality可选择压缩质量；fOut是输出流（OutputStream），这里的FileOutputStream是OutputStream的一个子类。</p>
<p>总结一下，本文介绍Bitmap的使用方法——用Bitmap实现图像文件的读取和写入，并用Bitmap实现图像的剪切、旋转和缩放变换。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="John Doe" />
          <p class="site-author-name" itemprop="name">John Doe</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">33</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  
  

  

  

</body>
</html>
